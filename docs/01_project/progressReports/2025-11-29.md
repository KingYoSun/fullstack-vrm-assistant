# 2025年11月29日 進捗レポート

## 概要
- 「実運用レベルへの残タスク」を中心に、本番向け compose/環境設定と運用手順を整備。ヘルスチェックのフォールバック検知を強化し、ドキュメントを更新。

## 成果
- 本番用 `docker-compose.yml` を追加し、vLLM/sherpa-onnx/Open Audio S1/text-embeddings-inference 構成をデフォルト化。GPU `device_requests`、モデルボリューム、ヘルスチェックを設定し、モックを `profile=mock` に分離。
- `config/providers.yaml` を環境変数プレースホルダ化し、`.env` 系に LLM/STT/TTS/Embedding/RAG のパラメータを追加。未解決プレースホルダ検出を `load_providers_config` に実装。
- `/health` `/ready` で `is_mock`/`fallback_count` を返し、警告検知時は `status=degraded` とするように更新。フォールバックはログに `fallback=true` で記録。
- `docs/03_implementation/production_runtime.md` を新規追加し、各プロバイダのモデル取得・起動手順、RAG ingest ジョブ、ヘルス/レイテンシ計測、GPU/ログ/ロールバックの運用ノートをまとめた。mvp_plan の残タスクを完了として更新（レイテンシ実測のみ残置）。

## 課題
- 実プロバイダ（gpt-oss-120b / sherpa-onnx / Open Audio S1 / Embedding）のイメージ・モデル配置が環境に依存するため、実機での起動確認とコマンド調整が必要。
- 本番相当のレイテンシ計測（partial/final/tts_start の p95）は未実施。実プロバイダ接続時に 10〜20 サンプル計測が必要。

## 次のアクション
- 実プロバイダモデルを配置した上で `docker compose up`（または `--profile mock` 切り替え）を実行し、`/ready` の `warnings` を確認。
- RAG ingest ジョブを実行し、`/data/faiss` のインデックス生成と検索結果を確認。
- レイテンシ計測手順（`production_runtime.md`）に沿って p95 を採取し、`tasks/status/in_progress.md` の動作確認タスクを埋める。
