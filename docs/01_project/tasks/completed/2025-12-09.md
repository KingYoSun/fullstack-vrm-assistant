# 2025年12月09日

- Zustand 5 を導入し、フロントエンドの状態管理を一元化。
  - 新規: `frontend/src/store/appStore.ts`。WebSocket/マイク制御、診断リクエスト、キャラクター CRUD、UI トグルをストアのアクションとして集約し、URL 正規化やログ出力も共通化。
  - `frontend/package.json`, `frontend/pnpm-lock.yaml`: `zustand@5.0.9` を追加。
- 各 UI コンポーネントがストアを直接参照する形に変更し、props の配線を大幅削減。
  - 更新: `frontend/src/components/session/ControlDock.tsx`, `frontend/src/components/panels/RemotePanel.tsx`, `frontend/src/components/panels/StreamPanel.tsx`。
  - 更新: `frontend/src/components/drawers/ConnectionDrawer.tsx`, `frontend/src/components/drawers/PersonaDrawer.tsx`, `frontend/src/components/drawers/DiagnosticsDrawer.tsx`, `frontend/src/components/drawers/LogsDrawer.tsx`。開閉やフォーム操作、API 呼び出しをストアのアクションに委譲。
- App エントリを薄型化し、描画とライフサイクルに専念。
  - `frontend/src/App.tsx`: VRM ファイル入力ハンドラとビューポート監視のみを保持し、Canvas・パネル・ドロワーはストア駆動で配置。口パク減衰やマイク非対応ログは副作用に集約。
