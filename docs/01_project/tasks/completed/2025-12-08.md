# 2025年12月08日

- フロントエンド UI をモバイル向けに再配置し、主要操作を常時アクセスしやすくした。
  - `frontend/src/App.tsx`: 接続/マイク/視点リセット/接続状態を下部中央の control dock に集約し、モバイル判定時にドロワーやパネルを初期折りたたみにするフラグを追加。
  - `frontend/src/App.css`: control dock のレイアウト、パネル折りたたみ用の余白とメディアクエリを追加し、stream/remote HUD の位置をモバイルでも重ならないよう調整。
- モバイル UI の最終調整を実施し、ユーザー確認済み。
  - 中央下部の HUD を一行に収め、接続/録音/視点リセットとステータス表示をアイコン主体に統一。
  - STT/LLM パネルと control dock の縦方向間隔を詰め、実機での隙間を解消した。
- STT / LLM パネルの「収納」時に partial / assistant 表示も非表示になるよう統一。
  - `frontend/src/App.tsx`: デスクトップ折りたたみ時のサマリブロックを削除し、全フィールドを収納。
  - `frontend/src/App.css`: 不要になった折りたたみヒント用スタイルを削除。
- README にデフォルト VRM モデルの出典（アリシア・ソリッド）を記載。
  - `README.md`: `frontend/public/AliciaSolid.vrm` が [アリシア・ソリッド](https://3d.nicovideo.jp/alicia/) である旨と、差し替え手順を追記。
- 任意の VRM ファイルをローカルから読み込めるようにし、設定 / ログ コンポーネントにモデル読み込みボタンを追加。
  - `frontend/src/App.tsx`: VRM URL をオブジェクト URL に差し替えるファイル入力を追加し、ローカル VRM を選択して即座に読み込めるようにした。切替時やアンマウント時に object URL を解放するようにし、ボタンを設定 / ログ セクションのチップ群に配置。
- フロントエンド App.tsx をコンポーネント分割し、責務ごとに整理。
  - 新規: `frontend/src/components/avatar/AvatarCanvas.tsx`（CanvasErrorBoundary と VRM 描画/カメラ調整）、`frontend/src/components/session/ControlDock.tsx`（接続/録音操作）、`frontend/src/components/panels/RemotePanel.tsx`（VRM ロード/ドロワートグル）、`frontend/src/components/panels/StreamPanel.tsx`（partial/history/latency 表示）、`frontend/src/components/drawers/ConnectionDrawer.tsx`, `frontend/src/components/drawers/PersonaDrawer.tsx`, `frontend/src/components/drawers/DiagnosticsDrawer.tsx`, `frontend/src/components/drawers/LogsDrawer.tsx`。
  - `frontend/src/types/app.ts`: ログ/チャット/診断などの型を集約し、App.tsx からのローカル定義を移動。
  - `frontend/src/App.tsx`: JSX を上記コンポーネント呼び出しに置き換え、状態管理・ハンドラの配線に集中する構造へ整理。
