# compose / runtime
# COMPOSE_PROFILES は起動時に dev/prod/mock を選択（例: COMPOSE_PROFILES=dev）
COMPOSE_PROFILES=
REQUEST_TIMEOUT_SEC=30
CORS_ALLOWED_ORIGINS=*

# backend
BACKEND_PORT=8000
PROVIDERS_CONFIG_PATH=/workspace/config/providers.yaml
POSTGRES_PORT=5432
POSTGRES_USER=vrm
POSTGRES_PASSWORD=vrm_password
POSTGRES_DB=vrm
DATABASE_URL=postgresql+asyncpg://vrm:vrm_password@postgres:5432/vrm
DATA_ROOT=/data
DATA_MOUNT_PATH=/data

# frontend
FRONTEND_PORT=5173
VITE_WS_BASE_URL=
VITE_BACKEND_HOST=
VITE_BACKEND_PORT=8000
VITE_WS_PATH=/ws/session
VITE_ALLOWED_HOSTS=
VITE_NO_BACKEND_PORT=

# LLM
LLM_IMAGE=local/gpt-oss-llm:cuda
LLM_PLATFORM=linux/arm64
LLM_UBUNTU_VERSION=24.04
LLM_CUDA_VERSION=13.0.2
LLM_CUDA_ARCH=121
LLAMA_CPP_REPO=https://github.com/ggml-org/llama.cpp.git
LLAMA_CPP_REF=
LLM_LOCAL_PORT=18000
LLM_PORT=8080
LLM_MODEL_DIR=/models
LLM_MODEL_LOCAL_DIR=./models/llm
LLM_MODEL=/models/gpt-oss-20b.gguf
LLM_PROVIDER=llama-cpp-gpt-oss-20b
LLM_ENDPOINT=http://llm:${LLM_PORT}/v1
LLM_CTX_SIZE=16384
LLM_THREADS=-1
LLM_N_GPU_LAYERS=99
LLM_FLASH_ATTN=auto
LLM_TEMPERATURE=0.6
LLM_MAX_TOKENS=1024
LLM_TIMEOUT_SEC=30
LLM_STREAM=true

# STT
STT_IMAGE=local/whisper-stt:cuda
STT_MODEL_LOCAL_DIR=./models/stt
STT_MODEL_DIR=/models
STT_MODEL=/models/ggml-base.en.bin
STT_PORT=6006
STT_THREADS=16
STT_PROVIDER=whisper-cpp
STT_ENDPOINT=http://stt:6006/inference
STT_LANGUAGE=ja
STT_TARGET_SAMPLE_RATE=16000
STT_ENABLE_PARTIAL=true
STT_VAD=
STT_TIMEOUT_SEC=30

# TTS (Open Audio S1)
TTS_IMAGE=local/openvoice:cuda
TTS_PROVIDER=open-audio-s1
TTS_ENDPOINT=http://tts:7007/v1/tts
TTS_PORT=7007
TTS_MODEL_LOCAL_DIR=./models/tts
TTS_REFERENCE_LOCAL_DIR=./references/tts
TTS_DEFAULT_VOICE=ja_female_1
TTS_LANGUAGE=ja-JP
TTS_OUTPUT_FORMAT=opus
TTS_SAMPLE_RATE=44100
TTS_STREAM=true
TTS_CHUNK_MS=40
TTS_TIMEOUT_SEC=30
TTS_MODEL_DIR=/app/checkpoints
TTS_REFERENCE_DIR=/app/references
TTS_GPU_COUNT=1
TTS_BACKEND=cpu

# Motion
MOTION_IMAGE=local/motion-mdm:cuda
MOTION_PROVIDER=mdm
MOTION_ENDPOINT=http://motion:${MOTION_PORT}/v1/motion/generate
MOTION_PORT=7100
MOTION_TIMEOUT_SEC=30
MOTION_OUTPUT_FORMAT=vrm-json
MOTION_MODEL_LOCAL_DIR=./models/motion
MOTION_MODEL_DIR=/checkpoint_dir
MOTION_DATA_LOCAL_DIR=./data/motion
MOTION_DATA_DIR=/data/motion
MOTION_OUTPUT_DIR=/data/animations
MOTION_DATA_MOUNT_PATH=/data
MOTION_MDM_REPO_DIR=/workspace/motion-diffusion-model
MOTION_MDM_DEFAULT_CKPT=/checkpoint_dir/mdm/humanml_trans_dec_512_bert-50steps/model000200000.pt
MOTION_MDM_DIP_CKPT=/checkpoint_dir/dip/target_10steps_context20_predict40/model000200000.pt
MOTION_MDM_DEFAULT_FPS=20
MOTION_MDM_DIP_FPS=20
MOTION_MDM_DEFAULT_MOTION_LENGTH=5

# Embedding
EMBEDDING_IMAGE=local/llama-embedding:cuda
EMBEDDING_PROVIDER=local-embedding
EMBEDDING_ENDPOINT=http://embedding:9000/embedding
EMBEDDING_PORT=9000
EMBEDDING_MODEL=/models/embd-model.gguf
EMBEDDING_MODEL_LOCAL_DIR=./models/embedding
EMBEDDING_PARALLEL=4
EMBEDDING_UBATCH=1024
EMBEDDING_NGPU=999
EMBEDDING_POOLING=mean
EMBEDDING_MODEL_DIR=/models
EMBEDDING_BATCH_SIZE=16
EMBEDDING_TIMEOUT_SEC=30

# RAG
RAG_PROVIDER=faiss
RAG_INDEX_PATH=/data/faiss/index.bin
RAG_TOP_K=5
RAG_EMBEDDING_PROVIDER=local-embedding
